# LeasingTestAssignment

## Описание

LeasingTestAssignment — это .NET 8 Web API-приложение для управления офферами и поставщиками в лизинговой сфере. Решение реализует основные CRUD-операции для офферов, поиск, а также предоставляет информацию о поставщиках с максимальным количеством офферов.

## Структура решения

- **LeasingTestAssignment.API** — основной проект Web API.
- **LeasingTestAssignment.Application** — слой бизнес-логики и DTO.
- **LeasingTestAssignment.Domain** — доменные интерфейсы и сущности.
- **LeasingTestAssignment.Infrastructure** — реализация доступа к данным, репозиториев и интеграция с внешними сервисами.

## Основные возможности

- Создание, получение и поиск офферов.
- Получение списка всех офферов.
- Получение поставщиков с максимальным количеством офферов.
- Валидация входных данных.
- Глобальная обработка ошибок через middleware.
- Логгирование всех ключевых операций и ошибок.

## Работа с базой данных: Code First и миграции

В проекте может быть использован подход **Code First** с помощью Entity Framework Core. Это позволяет описывать структуру данных через C#-классы, а затем автоматически создавать и изменять схему базы данных с помощью миграций.

Для управления схемой и данными БД используются миграции:
- Миграция SeedSuppliersAndOffers содержит тестовые данные для быстрой проверки работы API.


## API Endpoints

### Offers

- `POST /api/offers` — создать оффер.
- `GET /api/offers/{id}` — получить оффер по ID.
- `GET /api/offers` — получить все офферы.
- `GET /api/offers/search?searchText=...` — поиск офферов по тексту.

### Suppliers

- `GET /api/suppliers/by-maximum-offers` — получить поставщиков с максимальным количеством офферов (топ-3).

## Валидация и обработка ошибок

- Все входные данные валидируются.
- Ошибки возвращаются в стандартизированном формате.
- Глобальный middleware логгирует и обрабатывает исключения.

## Логгирование

- Используется встроенный `ILogger` для логгирования запросов, ошибок и бизнес-событий.

## Запуск и тестирование

1. Убедитесь, что установлен .NET 8 SDK.
2. Соберите и запустите проект API:
```
   dotnet run --project LeasingTestAssignment.API
```
3. Используйте Postman или другой HTTP-клиент для тестирования API.
1. Для тестирования можно использовать Swagger UI, доступный по адресу `http://localhost:5000/swagger`.
3. Откройте Swagger UI по адресу `http://localhost:<порт>/swagger` для тестирования эндпоинтов.

---

Для простоты реализации проект построен на основе классического CRUD-подхода с использованием кастомных решений для маппинга и валидации.  
В качестве альтернативы можно было использовать архитектурный паттерн CQRS, а также сторонние пакеты, такие как AutoMapper(неоднозначно), TinyMapper для маппинга DTO и FluentValidation для валидации данных.
